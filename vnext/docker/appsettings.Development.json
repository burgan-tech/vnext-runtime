{
  "ApplicationName": "vnext",
  "ConnectionStrings": {
    "Default": "Host=vnext-postgres;Port=5432;Database=vNext_WorkflowDb;Username=postgres;Password=postgres;"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Debug",
      "Microsoft.AspNetCore": "Warning",
      "System.Net.Http.HttpClient.OtlpTraceExporter.LogicalHandler": "Warning",
      "Microsoft.AspNetCore.Routing.EndpointMiddleware": "Information",
      "System.Net.Http.HttpClient.Default.LogicalHandler": "Warning",
      "Microsoft.EntityFrameworkCore.Database.Command": "Warning"
    }
  },
  "vNextApi": {
    "BaseUrl": "http://vnext-app:5000",
    "ApiVersion": "1",
    "TimeoutSeconds": 30,
    "MaxRetryAttempts": 3,
    "RetryDelayMilliseconds": 1000,
    "CircuitBreakerFailureThreshold": 20,
    "CircuitBreakerTimeoutSeconds": 30,
    "EnableCircuitBreakerBypass": true,
    "InternalOperationHeader": "X-Internal-Operation"
  },
  "ResponseCompression": {
    "Enable": true,
    "Providers": ["gzip"],
    "EnableForHttps": true,
    "MimeTypes": [],
    "ExcludedMimeTypes": []
  },
  "Redis": {
    "Mode": "Standalone",
    "InstanceName": "workflow-api",
    "ConnectionTimeout": 5000,
    "DefaultDatabase": 0,
    "Password": "",
    "Ssl": false,
    "Standalone": {
      "EndPoints": ["vnext-redis:6379"]
    },
    "RetryPolicy": {
      "MaxRetries": 3,
      "RetryTimeout": 1000
    }
  },
  "Telemetry": {
    "Tracing": {
      "EnableExcludedPaths": true
    },
    "Logging": {
      "Enabled": true,
      "EnableConsoleExporter": true,
      "EnableOtlpExporter": true,
      "IncludeFormattedMessage": true,
      "IncludeScopes": true,
      "ParseStateValues": true,
      "ExcludedPaths": [
        "^/swagger(?:/.*)?$", 
        "^/dapr(?:/.*)?$",
        "^/health$",  
        "^/healthz$",  
        "^/v1/metrics$",  
        "^/metrics$",  
        "^/v1/traces",  
        "^/traces",  
        "^/$",
        "^/otel-collector",
        "^/dapr.proto.runtime",
        "^/v1.0/lock",
        "^/v1.0/unlock"
      ],
      "Enrichers": {
        "Headers": [
          "x-correlation-id",
          "x-request-id"
        ]
      }
    }
  },
  "AllowedHosts": "*",
  "TaskFactory": {
    "UseObjectPooling": false,
    "MaxPoolSize": 50,
    "InitialPoolSize": 5,
    "EnableMetrics": true,
    "PooledTaskTypes": [
      "DaprServiceTask",
      "HttpTask",
      "ScriptTask",
      "ConditionTask",
      "DaprBindingTask",
      "DaprHttpEndpointTask",
      "DaprPubSubTask",
      "DaprServiceTask",
      "HumanTask"
    ]
  },
  "ExecutionService": {
    "AppId": "vnext-execution-app"
  },
  "Vault": {
    "Enabled": false
  },
  "ClickHouse": {
    "Enabled": false,
    "ConnectionString": "Host=vnext-clickhouse;Port=8123;Database=workflow_analytics;Username=default;Password=;",
    "BatchSize": 1000,
    "FlushIntervalSeconds": 5,
    "RetryAttempts": 3,
    "RetryDelayMilliseconds": 1000,
    "Tables": {
      "Instances": "instances",
      "InstanceTransitions": "instance_transitions",
      "InstanceTasks": "instance_tasks"
    }
  },
  "DaprEventPublisher": {
    "PubSubName": "vnext-pubsub",
    "PublishInParallel": true,
    "ContinueOnError": false,
    "ThrowAggregateException": false,
    "TopicNamingStrategy": "AggregateType"
  }
}
