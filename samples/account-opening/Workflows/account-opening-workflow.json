{
  "key": "account-opening",
  "flow": "sys-flows",
  "domain": "core",
  "version": "1.0.0",
  "tags": [
    "banking",
    "account-opening",
    "demand-deposit",
    "digital-banking",
    "customer-onboarding"
  ],
  "attributes": {
    "type": "F",
    "timeout": null,
    "labels": [
      {
        "language": "en-US",
        "label": "Digital Banking Account Opening Workflow"
      },
      {
        "language": "tr-TR",
        "label": "Dijital Bankacılık Hesap Açılışı İş Akışı"
      }
    ],
    "functions": [],
    "features": [],
    "extensions": [],
    "sharedTransitions": [],
    "startTransition": {
      "key": "initiate-account-opening",
      "target": "account-type-selection",
      "triggerType": 0,
      "versionStrategy": "Minor",
      "labels": [
        {
          "language": "en-US",
          "label": "Initiate Account Opening"
        },
        {
          "language": "tr-TR",
          "label": "Hesap Açılışını Başlat"
        }
      ],
      "schema": null,
      "rule": null,
      "timer": null,
      "view": {
        "key": "account-type-selection-view",
        "domain": "core",
        "version": "1.0.0",
        "flow": "sys-views"
      },
      "onExecutionTasks": [
        {
          "order": 1,
          "task": {
            "key": "user-session",
            "domain": "core",
            "version": "1.0.0",
            "flow": "sys-tasks"
          },
          "mapping": {
            "location": "./src/UserSessionMapping.csx",
            "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKdXNpbmcgQkJULldvcmtmbG93LkRlZmluaXRpb25zOwoKcHVibGljIGNsYXNzIFVzZXJTZXNzaW9uTWFwcGluZyA6IElNYXBwaW5nCnsKICAgIHB1YmxpYyBUYXNrPFNjcmlwdFJlc3BvbnNlPiBJbnB1dEhhbmRsZXIoV29ya2Zsb3dUYXNrIHRhc2ssIFNjcmlwdENvbnRleHQgY29udGV4dCkKICAgIHsKICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0KG5ldyBTY3JpcHRSZXNwb25zZSgpKTsKICAgIH0KCiAgICAvLy8gPHN1bW1hcnk+CiAgICAvLy8gUG9wdWxhdGUgdGhlIHVzZXIgc2Vzc2lvbiBkYXRhIGludG8gdGhlIHdvcmtmbG93IGluc3RhbmNlCiAgICAvLy8gPC9zdW1tYXJ5PgogICAgcHVibGljIGFzeW5jIFRhc2s8U2NyaXB0UmVzcG9uc2U+IE91dHB1dEhhbmRsZXIoU2NyaXB0Q29udGV4dCBjb250ZXh0KQogICAgewogICAgICAgIHJldHVybiBuZXcgU2NyaXB0UmVzcG9uc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgS2V5ID0gInVzZXItc2Vzc2lvbi1vdXRwdXQiLAogICAgICAgICAgICAgICAgRGF0YSA9IG5ldwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHVzZXJTZXNzaW9uID0gbmV3CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQgPSBjb250ZXh0LkhlYWRlcnM/WyJ1c2VyX3JlZmVyZW5jZSJdLAogICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZCA9IGNvbnRleHQuSGVhZGVycz9bIngtZGV2aWNlLWlkIl0sCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJBZ2VudCA9IGNvbnRleHQuSGVhZGVycz9bInVzZXItYWdlbnQiXSwKICAgICAgICAgICAgICAgICAgICAgICAgaXBBZGRyZXNzID0gY29udGV4dC5IZWFkZXJzP1sieC1mb3J3YXJkZWQtZm9yIl0gPz8gY29udGV4dC5IZWFkZXJzP1sieC1yZWFsLWlwIl0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICB9Cn0K"
          }
        }
      ]
    },
    "states": [
      {
        "key": "account-type-selection",
        "stateType": 1,
        "versionStrategy": "Minor",
        "labels": [
          {
            "language": "en-US",
            "label": "Account Type Selection"
          },
          {
            "language": "tr-TR",
            "label": "Hesap Türü Seçimi"
          }
        ],
        "view": {
          "key": "account-type-selection-view",
          "domain": "core",
          "version": "1.0.0",
          "flow": "sys-views"
        },
        "subFlow": null,
        "onEntries": [],
        "onExits": [],
        "transitions": [
          {
            "key": "select-demand-deposit",
            "target": "account-details-input",
            "triggerType": 0,
            "versionStrategy": "Minor",
            "labels": [
              {
                "language": "en-US",
                "label": "Select Demand Deposit Account"
              },
              {
                "language": "tr-TR",
                "label": "Vadesiz Hesap Seç"
              }
            ],
            "schema": {
              "key": "account-type-selection",
              "version": "1.0.0",
              "domain": "core",
              "flow": "sys-schemas"
            },
            "rule": null,
            "timer": null,
            "view": null,
            "onExecutionTasks": [
              {
                "order": 1,
                "task": {
                  "key": "send-signalr-notification",
                  "domain": "core",
                  "version": "1.0.0",
                  "flow": "sys-tasks"
                },
                "mapping": {
                  "location": "./src/SendSignalrMapping.csx",
                  "code": "dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgU3lzdGVtLkxpbnE7CnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7CnVzaW5nIEJCVC5Xb3JrZmxvdy5TY3JpcHRpbmc7CnVzaW5nIEJCVC5Xb3JrZmxvdy5EZWZpbml0aW9uczsKdXNpbmcgU3lzdGVtLlRleHQuSnNvbjsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZy5GdW5jdGlvbnM7CnVzaW5nIFN5c3RlbS5OZXQuSHR0cC5IZWFkZXJzOwpwdWJsaWMgY2xhc3MgU2VuZFNpZ25hbHJNYXBwaW5nIDpTY3JpcHRCYXNlLCBJTWFwcGluZwp7CiAgICBwdWJsaWMgYXN5bmMgVGFzazxTY3JpcHRSZXNwb25zZT4gSW5wdXRIYW5kbGVyKFdvcmtmbG93VGFzayB0YXNrLCBTY3JpcHRDb250ZXh0IGNvbnRleHQpCiAgICB7CiAgICAgICAgdmFyIGh0dHBUYXNrID0gKHRhc2sgYXMgSHR0cFRhc2spITsKICAgICAgICAKICAgICAgICAvLyBEaWtrYXQhIFNpZ25hbHIgVXJsIGJpbGdpc2luaSBzZXQgZXRtZW5peiBnZXJla21la3RlZGlyLgogICAgICAgIHZhciBzaWduYWxSVXJsID0gc3RyaW5nLkVtcHR5OwoKICAgICAgICBodHRwVGFzay5TZXRVcmwoc2lnbmFsUlVybCk7CiAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IGNvbnRleHQuV29ya2Zsb3cuR2V0U3RhdGUoY29udGV4dC5JbnN0YW5jZS5DdXJyZW50U3RhdGUhKTsKICAgICAgICBMaXN0PHN0cmluZz4gdHJhbnNpdGlvbkxpc3Q9Y3VycmVudFN0YXRlLlRyYW5zaXRpb25LZXlzKCk7CiAgICAgICAgCiAgICAgICAgLy8gVHJhbnNpdGlvbnMgbGlzdGVzaW5pIG9sdcWfdHVyCiAgICAgICAgdmFyIHRyYW5zaXRpb25JdGVtcyA9IHRyYW5zaXRpb25MaXN0LlNlbGVjdCh0cmFuc2l0aW9uS2V5ID0+IG5ldyBUcmFuc2l0aW9uSXRlbQogICAgICAgIHsKICAgICAgICAgICAgTmFtZSA9IHRyYW5zaXRpb25LZXksCiAgICAgICAgICAgIEhyZWYgPSAkIi97Y29udGV4dC5SdW50aW1lLkRvbWFpbn0vd29ya2Zsb3dzL3tjb250ZXh0LldvcmtmbG93LktleX0vaW5zdGFuY2VzL3tjb250ZXh0Lkluc3RhbmNlLklkfS90cmFuc2l0aW9ucy97dHJhbnNpdGlvbktleX0iCiAgICAgICAgfSkuVG9MaXN0KCk7CiAgICAgICAgCiAgICAgICAgLy8gQWN0aXZlIENvcnJlbGF0aW9ucyBsaXN0ZXNpbmkgb2x1xZ90dXIKICAgICAgICAvLyBOb3Q6IENvbnRleHQndGUgY29ycmVsYXRpb24gYmlsZ2lzaSB2YXJzYSBrdWxsYW5hYmlsaXJzaW5pegogICAgICAgIHZhciBhY3RpdmVDb3JyZWxhdGlvbnMgPSBuZXcgTGlzdDxBY3RpdmVDb3JyZWxhdGlvbkhyZWY+KCk7CiAgICAgICAgCiAgICAgICAgLy8gRcSfZXIgY29udGV4dC5JbnN0YW5jZSd0YSBDb3JyZWxhdGlvbnMgdmFyc2E6CiAgICAgICAgdmFyIGNvcnJlbGF0aW9ucyA9IGNvbnRleHQuSW5zdGFuY2UuQ2hpbGRDb3JyZWxhdGlvbnM7IC8vIHZleWEgYmHFn2thIGJpciBwcm9wZXJ0eQogICAgICAgIGlmIChjb3JyZWxhdGlvbnMgIT0gbnVsbCkKICAgICAgICB7CiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb3JyZWxhdGlvbiBpbiBjb3JyZWxhdGlvbnMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGFjdGl2ZUNvcnJlbGF0aW9ucy5BZGQobmV3IEFjdGl2ZUNvcnJlbGF0aW9uSHJlZgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIENvcnJlbGF0aW9uSWQgPSBjb3JyZWxhdGlvbi5JZCwKICAgICAgICAgICAgICAgICAgICBQYXJlbnRTdGF0ZSA9IGNvcnJlbGF0aW9uLlBhcmVudFN0YXRlLAogICAgICAgICAgICAgICAgICAgIFN1YkZsb3dJbnN0YW5jZUlkID0gY29ycmVsYXRpb24uU3ViRmxvd0luc3RhbmNlSWQsCiAgICAgICAgICAgICAgICAgICAgU3ViRmxvd1R5cGUgPSBjb3JyZWxhdGlvbi5TdWJGbG93VHlwZSwKICAgICAgICAgICAgICAgICAgICBTdWJGbG93RG9tYWluID0gY29ycmVsYXRpb24uU3ViRmxvd0RvbWFpbiwKICAgICAgICAgICAgICAgICAgICBTdWJGbG93TmFtZSA9IGNvcnJlbGF0aW9uLlN1YkZsb3dOYW1lLAogICAgICAgICAgICAgICAgICAgIFN1YkZsb3dWZXJzaW9uID0gY29ycmVsYXRpb24uU3ViRmxvd1ZlcnNpb24sCiAgICAgICAgICAgICAgICAgICAgSXNDb21wbGV0ZWQgPSBjb3JyZWxhdGlvbi5Jc0NvbXBsZXRlZCwKICAgICAgICAgICAgICAgICAgICBIcmVmID0gJCIve2NvcnJlbGF0aW9uLlN1YkZsb3dEb21haW59L3dvcmtmbG93cy97Y29ycmVsYXRpb24uU3ViRmxvd05hbWV9L2luc3RhbmNlcy97Y29ycmVsYXRpb24uU3ViRmxvd0luc3RhbmNlSWR9L2RhdGEiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBJbnN0YW5jZSBzdGF0ZSBvdXRwdXQgb2x1xZ90dXIKICAgICAgICB2YXIgZGF0YUhyZWYgPSBuZXcgRGF0YUhyZWYKICAgICAgICB7CiAgICAgICAgICAgIEhyZWYgPSAkIi97Y29udGV4dC5SdW50aW1lLkRvbWFpbn0vd29ya2Zsb3dzL3tjb250ZXh0LldvcmtmbG93LktleX0vaW5zdGFuY2VzL3tjb250ZXh0Lkluc3RhbmNlLklkfS9kYXRhIgogICAgICAgIH07CgogICAgICAgIHZhciB2aWV3SHJlZiA9IG5ldyBWaWV3SHJlZgogICAgICAgIHsKICAgICAgICAgICAgSHJlZiA9ICQiL3tjb250ZXh0LlJ1bnRpbWUuRG9tYWlufS93b3JrZmxvd3Mve2NvbnRleHQuV29ya2Zsb3cuS2V5fS9pbnN0YW5jZXMve2NvbnRleHQuSW5zdGFuY2UuSWR9L3ZpZXciLAogICAgICAgICAgICBMb2FkRGF0YSA9IHRydWUKICAgICAgICB9OwoKICAgICAgICB2YXIgaW5zdGFuY2VPdXRwdXQgPSBuZXcgR2V0SW5zdGFuY2VTdGF0ZU91dHB1dAogICAgICAgIHsKICAgICAgICAgICAgRGF0YSA9IGRhdGFIcmVmLAogICAgICAgICAgICBWaWV3ID0gdmlld0hyZWYsCiAgICAgICAgICAgIFN0YXRlID0gY29udGV4dC5JbnN0YW5jZS5DdXJyZW50U3RhdGUgPz8gc3RyaW5nLkVtcHR5LAogICAgICAgICAgICBTdGF0dXMgPSBjb250ZXh0Lkluc3RhbmNlLlN0YXR1cywKICAgICAgICAgICAgQWN0aXZlQ29ycmVsYXRpb25zID0gYWN0aXZlQ29ycmVsYXRpb25zLAogICAgICAgICAgICBUcmFuc2l0aW9ucyA9IHRyYW5zaXRpb25JdGVtcywKICAgICAgICAgICAgRVRhZyA9IGNvbnRleHQuSW5zdGFuY2UuTGF0ZXN0RGF0YT8uRVRhZyA/PyBzdHJpbmcuRW1wdHkKICAgICAgICB9OwogICAgICAgIAogICAgICAgIC8vIFNpZ25hbFIgcmVxdWVzdCBvbHXFn3R1cgogICAgICAgIHZhciBzaWduYWxSUmVxdWVzdCA9IG5ldyBTaWduYWxSUmVxdWVzdAogICAgICAgIHsKICAgICAgICAgICAgSWQgPSBjb250ZXh0Lkluc3RhbmNlLklkLlRvU3RyaW5nKCksCiAgICAgICAgICAgIFNvdXJjZSA9ICJ2bmV4dCIsCiAgICAgICAgICAgIFR5cGUgPSAidm5leHQud29ya2Zsb3ciLAogICAgICAgICAgICBTdWJqZWN0ID0gIndvcmtmbG93LWNvbXBsZXRlZCIsCiAgICAgICAgICAgIERhdGEgPSBpbnN0YW5jZU91dHB1dAogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgLy8gQm9keSd5aSBheWFybGEKICAgICAgICBodHRwVGFzay5TZXRCb2R5KHNpZ25hbFJSZXF1ZXN0KTsKICAgICAgICAKICAgICAgICAvLyBIZWFkZXJzJ8SxIGF5YXJsYQogICAgICAgIGh0dHBUYXNrLlNldEhlYWRlcnMobmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+CiAgICAgICAgewogICAgICAgICAgICB7ICJYLURldmljZS1JZCIsY29udGV4dC5IZWFkZXJzP1sieC1kZXZpY2UtaWQiXSA/PyBzdHJpbmcuRW1wdHkgfSwKICAgICAgICAgICAgeyAiWC1JbnN0YWxsYXRpb24tSWQiLGNvbnRleHQuSGVhZGVycz9bIngtaW5zdGFsbGF0aW9uLWlkIl0gPz8gc3RyaW5nLkVtcHR5IH0KICAgICAgICB9KTsKICAgICAgICAKICAgICAgICByZXR1cm4gbmV3IFNjcmlwdFJlc3BvbnNlKCkKICAgICAgICB7CiAgICAgICAgICAgIERhdGEgPSB0cmFuc2l0aW9uTGlzdCwKICAgICAgICAgICAgSGVhZGVycyA9Y29udGV4dC5IZWFkZXJzCiAgICAgICAgfTsKICAgIH0KCiAgICBwdWJsaWMgVGFzazxTY3JpcHRSZXNwb25zZT4gT3V0cHV0SGFuZGxlcihTY3JpcHRDb250ZXh0IGNvbnRleHQpCiAgICB7CiAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdChuZXcgU2NyaXB0UmVzcG9uc2UoKQogICAgICAgIHsKICAgICAgICAgICAgRGF0YSA9IGNvbnRleHQuQm9keQogICAgICAgIH0pOwogICAgfQp9CgovLyBHZXRJbnN0YW5jZVN0YXRlT3V0cHV0IG1vZGVsCnB1YmxpYyBjbGFzcyBHZXRJbnN0YW5jZVN0YXRlT3V0cHV0CnsKICAgIHB1YmxpYyBEYXRhSHJlZiBEYXRhIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBWaWV3SHJlZiBWaWV3IHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBzdHJpbmcgU3RhdGUgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIEluc3RhbmNlU3RhdHVzPyBTdGF0dXMgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIExpc3Q8QWN0aXZlQ29ycmVsYXRpb25IcmVmPiBBY3RpdmVDb3JyZWxhdGlvbnMgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIExpc3Q8VHJhbnNpdGlvbkl0ZW0+IFRyYW5zaXRpb25zIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBzdHJpbmcgRVRhZyB7IGdldDsgc2V0OyB9Cn0KCi8vIERhdGFIcmVmIG1vZGVsCnB1YmxpYyBjbGFzcyBEYXRhSHJlZgp7CiAgICBwdWJsaWMgc3RyaW5nIEhyZWYgeyBnZXQ7IHNldDsgfQp9CgovLyBWaWV3SHJlZiBtb2RlbApwdWJsaWMgY2xhc3MgVmlld0hyZWYKewogICAgcHVibGljIHN0cmluZyBIcmVmIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBib29sIExvYWREYXRhIHsgZ2V0OyBzZXQ7IH0KfQoKLy8gQWN0aXZlQ29ycmVsYXRpb25IcmVmIG1vZGVsCnB1YmxpYyBjbGFzcyBBY3RpdmVDb3JyZWxhdGlvbkhyZWYKewogICAgcHVibGljIEd1aWQgQ29ycmVsYXRpb25JZCB7IGdldDsgc2V0OyB9CiAgICBwdWJsaWMgc3RyaW5nIFBhcmVudFN0YXRlIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBHdWlkIFN1YkZsb3dJbnN0YW5jZUlkIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBTdWJGbG93VHlwZSBTdWJGbG93VHlwZSB7IGdldDsgc2V0OyB9CiAgICBwdWJsaWMgc3RyaW5nIFN1YkZsb3dEb21haW4geyBnZXQ7IHNldDsgfQogICAgcHVibGljIHN0cmluZyBTdWJGbG93TmFtZSB7IGdldDsgc2V0OyB9CiAgICBwdWJsaWMgc3RyaW5nIFN1YkZsb3dWZXJzaW9uIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBib29sIElzQ29tcGxldGVkIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBzdHJpbmcgSHJlZiB7IGdldDsgc2V0OyB9Cn0KCi8vIFRyYW5zaXRpb25JdGVtIG1vZGVsCnB1YmxpYyBjbGFzcyBUcmFuc2l0aW9uSXRlbQp7CiAgICBwdWJsaWMgc3RyaW5nIE5hbWUgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIHN0cmluZyBIcmVmIHsgZ2V0OyBzZXQ7IH0KfQoKLy8gU2lnbmFsUiBSZXF1ZXN0IG1vZGVsCnB1YmxpYyBjbGFzcyBTaWduYWxSUmVxdWVzdAp7CiAgICBwdWJsaWMgc3RyaW5nIElkIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBzdHJpbmcgU291cmNlIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBzdHJpbmcgVHlwZSB7IGdldDsgc2V0OyB9CiAgICBwdWJsaWMgc3RyaW5nIFN1YmplY3QgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIGR5bmFtaWMgIERhdGEgeyBnZXQ7IHNldDsgfQp9Cgo="
                }
              }
            ]
          }
        ]
      },
      {
        "key": "account-details-input",
        "stateType": 5,
        "versionStrategy": "Minor",
        "labels": [
          {
            "language": "en-US",
            "label": "Account Details Input"
          },
          {
            "language": "tr-TR",
            "label": "Hesap Bilgileri Girişi"
          }
        ],
        "view": null,
        "subFlow": null,
        "onEntries": [],
        "onExits": [],
        "transitions": [
          {
            "key": "submit-account-details",
            "target": "account-confirmation",
            "triggerType": 0,
            "versionStrategy": "Minor",
            "labels": [
              {
                "language": "en-US",
                "label": "Submit Account Details"
              },
              {
                "language": "tr-TR",
                "label": "Hesap Bilgilerini Gönder"
              }
            ],
            "schema": {
              "key": "account-details-input",
              "version": "1.0.0",
              "domain": "core",
              "flow": "sys-schemas"
            },
            "rule": null,
            "timer": null,
            "view": {
              "key": "account-details-input-view",
              "domain": "core",
              "version": "1.0.0",
              "flow": "sys-views"
            },
            "onExecutionTasks": []
          }
        ]
      },
      {
        "key": "account-confirmation",
        "stateType": 1,
        "versionStrategy": "Minor",
        "labels": [
          {
            "language": "en-US",
            "label": "Account Confirmation"
          },
          {
            "language": "tr-TR",
            "label": "Hesap Onayı"
          }
        ],
        "view": {
          "key": "account-confirmation-view",
          "domain": "core",
          "version": "1.0.0",
          "flow": "sys-views"
        },
        "subFlow": null,
        "onEntries": [],
        "onExits": [],
        "transitions": [
          {
            "key": "confirm-account-opening",
            "target": "policy-validation",
            "triggerType": 0,
            "versionStrategy": "Minor",
            "labels": [
              {
                "language": "en-US",
                "label": "Confirm Account Opening"
              },
              {
                "language": "tr-TR",
                "label": "Hesap Açılışını Onayla"
              }
            ],
            "schema": {
              "key": "account-confirmation",
              "domain": "core",
              "version": "1.0.0",
              "flow": "sys-schemas"
            },
            "rule": null,
            "timer": null,
            "view": null,
            "onExecutionTasks": []
          }
        ]
      },
      {
        "key": "policy-validation",
        "stateType": 2,
        "versionStrategy": "Minor",
        "labels": [
          {
            "language": "en-US",
            "label": "Policy Validation"
          },
          {
            "language": "tr-TR",
            "label": "Politika Doğrulama"
          }
        ],
        "view": {
          "key": "policy-failure-popup-view",
          "domain": "core",
          "version": "1.0.0",
          "flow": "sys-views"
        },
        "subFlow": null,
        "onEntries": [
          {
            "order": 1,
            "task": {
              "key": "validate-account-policies",
              "domain": "core",
              "version": "1.0.0",
              "flow": "sys-tasks"
            },
            "mapping": {
              "location": "./src/ValidateAccountPoliciesMapping.csx",
              "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKdXNpbmcgQkJULldvcmtmbG93LkRlZmluaXRpb25zOwoKLy8vIDxzdW1tYXJ5PgovLy8gQWNjb3VudCBQb2xpY2llcyBWYWxpZGF0aW9uIE1hcHBpbmcgLSBWYWxpZGF0ZXMgYWNjb3VudCBvcGVuaW5nIGFnYWluc3QgYmFuayBwb2xpY2llcwovLy8gVGhpcyBtYXBwaW5nIHZhbGlkYXRlcyBhY2NvdW50IG9wZW5pbmcgcmVxdWVzdCBhZ2FpbnN0IGNvbXBsaWFuY2UgYW5kIHJpc2sgcG9saWNpZXMuCi8vLyA8L3N1bW1hcnk+CnB1YmxpYyBjbGFzcyBWYWxpZGF0ZUFjY291bnRQb2xpY2llc01hcHBpbmcgOiBJTWFwcGluZwp7CiAgICBwdWJsaWMgVGFzazxTY3JpcHRSZXNwb25zZT4gSW5wdXRIYW5kbGVyKFdvcmtmbG93VGFzayB0YXNrLCBTY3JpcHRDb250ZXh0IGNvbnRleHQpCiAgICB7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICB2YXIgaHR0cFRhc2sgPSB0YXNrIGFzIEh0dHBUYXNrOwogICAgICAgICAgICBpZiAoaHR0cFRhc2sgPT0gbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oIlRhc2sgbXVzdCBiZSBhbiBIdHRwVGFzayBmb3IgcG9saWN5IHZhbGlkYXRpb24iKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gR2V0IHVzZXIgc2Vzc2lvbiBhbmQgYWNjb3VudCBkZXRhaWxzIGZyb20gd29ya2Zsb3cgY29udGV4dAogICAgICAgICAgICB2YXIgdXNlclNlc3Npb24gPSBjb250ZXh0Lkluc3RhbmNlPy5EYXRhPy51c2VyU2Vzc2lvbjsKICAgICAgICAgICAgdmFyIGFjY291bnREZXRhaWxzID0gY29udGV4dC5JbnN0YW5jZT8uRGF0YT8uYWNjb3VudERldGFpbHM7CiAgICAgICAgICAgIHZhciBhY2NvdW50VHlwZSA9IGNvbnRleHQuSW5zdGFuY2U/LkRhdGE/LmFjY291bnRUeXBlOwoKICAgICAgICAgICAgLy8gUHJlcGFyZSB0aGUgcmVxdWVzdCBib2R5IGZvciBwb2xpY3kgdmFsaWRhdGlvbgogICAgICAgICAgICB2YXIgcmVxdWVzdEJvZHkgPSBuZXcKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gVXNlciBpbmZvcm1hdGlvbgogICAgICAgICAgICAgICAgdXNlcklkID0gdXNlclNlc3Npb24/LnVzZXJJZCwKICAgICAgICAgICAgICAgIHVzZXJFbWFpbCA9IHVzZXJTZXNzaW9uPy51c2VyRW1haWwsCiAgICAgICAgICAgICAgICBjdXN0b21lclNlZ21lbnQgPSB1c2VyU2Vzc2lvbj8uY3VzdG9tZXJTZWdtZW50LAogICAgICAgICAgICAgICAgY3VzdG9tZXJTaW5jZSA9IHVzZXJTZXNzaW9uPy5jdXN0b21lclNpbmNlLAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBBY2NvdW50IGRldGFpbHMKICAgICAgICAgICAgICAgIGFjY291bnRUeXBlID0gYWNjb3VudFR5cGU/LmFjY291bnRUeXBlID8/ICJkZW1hbmQtZGVwb3NpdCIsCiAgICAgICAgICAgICAgICBhY2NvdW50TmFtZSA9IGFjY291bnREZXRhaWxzPy5hY2NvdW50TmFtZSwKICAgICAgICAgICAgICAgIGN1cnJlbmN5ID0gYWNjb3VudERldGFpbHM/LmN1cnJlbmN5LAogICAgICAgICAgICAgICAgYnJhbmNoQ29kZSA9IGFjY291bnREZXRhaWxzPy5icmFuY2hDb2RlLAogICAgICAgICAgICAgICAgaW5pdGlhbERlcG9zaXQgPSBhY2NvdW50RGV0YWlscz8uaW5pdGlhbERlcG9zaXQgPz8gMCwKICAgICAgICAgICAgICAgIGFjY291bnRQdXJwb3NlID0gYWNjb3VudERldGFpbHM/LmFjY291bnRQdXJwb3NlLAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBSaXNrIGFzc2Vzc21lbnQgZGF0YQogICAgICAgICAgICAgICAgcmVxdWVzdGVkQXQgPSBEYXRlVGltZS5VdGNOb3csCiAgICAgICAgICAgICAgICBpcEFkZHJlc3MgPSBjb250ZXh0LkhlYWRlcnM/WyJ4LWZvcndhcmRlZC1mb3IiXSA/PyBjb250ZXh0LkhlYWRlcnM/WyJ4LXJlYWwtaXAiXSwKICAgICAgICAgICAgICAgIHVzZXJBZ2VudCA9IGNvbnRleHQuSGVhZGVycz9bInVzZXItYWdlbnQiXSwKICAgICAgICAgICAgICAgIGRldmljZUlkID0gY29udGV4dC5IZWFkZXJzP1sieC1kZXZpY2UtaWQiXSwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ29tcGxpYW5jZSBjaGVja3MKICAgICAgICAgICAgICAgIHRlcm1zQWNjZXB0ZWQgPSBjb250ZXh0Lkluc3RhbmNlPy5EYXRhPy5jb25maXJtYXRpb24/LnRlcm1zQWNjZXB0ZWQsCiAgICAgICAgICAgICAgICBwcml2YWN5UG9saWN5QWNjZXB0ZWQgPSBjb250ZXh0Lkluc3RhbmNlPy5EYXRhPy5jb25maXJtYXRpb24/LnByaXZhY3lQb2xpY3lBY2NlcHRlZCwKICAgICAgICAgICAgICAgIG1hcmtldGluZ0NvbnNlbnQgPSBjb250ZXh0Lkluc3RhbmNlPy5EYXRhPy5jb25maXJtYXRpb24/Lm1hcmtldGluZ0NvbnNlbnQKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGh0dHBUYXNrLlNldEJvZHkocmVxdWVzdEJvZHkpOwoKICAgICAgICAgICAgLy8gU2V0IEhlYWRlcnMKICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz8+CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFsiQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICBbIkF1dGhvcml6YXRpb24iXSA9IGNvbnRleHQuSGVhZGVycz9bImF1dGhvcml6YXRpb24iXSwKICAgICAgICAgICAgICAgIFsiWC1Vc2VyLUlkIl0gPSB1c2VyU2Vzc2lvbj8udXNlcklkPy5Ub1N0cmluZygpLAogICAgICAgICAgICAgICAgWyJYLVJlcXVlc3QtSWQiXSA9IGNvbnRleHQuSGVhZGVycz9bIngtcmVxdWVzdC1pZCJdID8/IEd1aWQuTmV3R3VpZCgpLlRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICBbIlgtV29ya2Zsb3ctSW5zdGFuY2UiXSA9IGNvbnRleHQuSW5zdGFuY2U/LklkLlRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICBbIlgtQWNjb3VudC1UeXBlIl0gPSBhY2NvdW50VHlwZT8uYWNjb3VudFR5cGU/LlRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICBbIlgtQ3VycmVuY3kiXSA9IGFjY291bnREZXRhaWxzPy5jdXJyZW5jeT8uVG9TdHJpbmcoKQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaHR0cFRhc2suU2V0SGVhZGVycyhoZWFkZXJzKTsKCiAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQobmV3IFNjcmlwdFJlc3BvbnNlKCkpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdChuZXcgU2NyaXB0UmVzcG9uc2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyA8c3VtbWFyeT4KICAgIC8vLyBQcm9jZXNzIHRoZSBwb2xpY3kgdmFsaWRhdGlvbiByZXN1bHQgYW5kIG1lcmdlIGl0IGludG8gdGhlIHdvcmtmbG93IGluc3RhbmNlCiAgICAvLy8gPC9zdW1tYXJ5PgogICAgcHVibGljIGFzeW5jIFRhc2s8U2NyaXB0UmVzcG9uc2U+IE91dHB1dEhhbmRsZXIoU2NyaXB0Q29udGV4dCBjb250ZXh0KQogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgdmFyIHN0YXR1c0NvZGUgPSBHZXRTdGF0dXNDb2RlRnJvbVJlc3BvbnNlKGNvbnRleHQpOwogICAgICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gR2V0UmVzcG9uc2VEYXRhRnJvbUNvbnRleHQoY29udGV4dCk7CgogICAgICAgICAgICAvLyBTdWNjZXNzZnVsIHZhbGlkYXRpb24KICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPCAzMDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBwb2xpY3lWYWxpZGF0aW9uID0gbmV3CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgcGFzc2VkID0gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZWRBdCA9IERhdGVUaW1lLlV0Y05vdywKICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uSWQgPSByZXNwb25zZURhdGE/LnZhbGlkYXRpb25JZCA/PyBHdWlkLk5ld0d1aWQoKS5Ub1N0cmluZygpLAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFBvbGljeSBjaGVjayByZXN1bHRzCiAgICAgICAgICAgICAgICAgICAgY29tcGxpYW5jZUNoZWNrcyA9IHJlc3BvbnNlRGF0YT8uY29tcGxpYW5jZUNoZWNrcyA/PyBuZXcKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGt5Y0NvbXBsaWFudCA9IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGFtbENvbXBsaWFudCA9IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNhbmN0aW9uc0NoZWNrID0gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgcmlza0Fzc2Vzc21lbnQgPSAibG93IgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQWNjb3VudCBsaW1pdHMgYW5kIHJlc3RyaWN0aW9ucwogICAgICAgICAgICAgICAgICAgIGFjY291bnRMaW1pdHMgPSByZXNwb25zZURhdGE/LmFjY291bnRMaW1pdHMgPz8gbmV3CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBkYWlseVRyYW5zYWN0aW9uTGltaXQgPSA1MDAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhseVRyYW5zYWN0aW9uTGltaXQgPSA1MDAwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW1CYWxhbmNlID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bUJhbGFuY2UgPSAxMDAwMDAwCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBBZGRpdGlvbmFsIHJlcXVpcmVtZW50cwogICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxSZXF1aXJlbWVudHMgPSByZXNwb25zZURhdGE/LmFkZGl0aW9uYWxSZXF1aXJlbWVudHMgPz8gbmV3IHN0cmluZ1tdIHsgfSwKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBBcHByb3ZhbCBkZXRhaWxzCiAgICAgICAgICAgICAgICAgICAgYXBwcm92ZWRCeSA9IHJlc3BvbnNlRGF0YT8uYXBwcm92ZWRCeSA/PyAic3lzdGVtIiwKICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbExldmVsID0gcmVzcG9uc2VEYXRhPy5hcHByb3ZhbExldmVsID8/ICJhdXRvbWF0ZWQiLAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIE1ldGFkYXRhCiAgICAgICAgICAgICAgICAgICAgcG9saWN5VmVyc2lvbiA9IHJlc3BvbnNlRGF0YT8ucG9saWN5VmVyc2lvbiA/PyAiMS4wLjAiLAogICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25TY29yZSA9IHJlc3BvbnNlRGF0YT8udmFsaWRhdGlvblNjb3JlID8/IDEwMAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNjcmlwdFJlc3BvbnNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgS2V5ID0gInBvbGljeS12YWxpZGF0aW9uLXN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIERhdGEgPSBuZXcKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVZhbGlkYXRpb24gPSBwb2xpY3lWYWxpZGF0aW9uCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBUYWdzID0gbmV3W10geyAiYmFua2luZyIsICJwb2xpY3ktdmFsaWRhdGlvbiIsICJjb21wbGlhbmNlIiwgInN1Y2Nlc3MiLCAiYXBwcm92ZWQiIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gRmFpbGVkIHZhbGlkYXRpb24KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZXJyb3JJbmZvID0gRXh0cmFjdEVycm9ySW5mb3JtYXRpb24oY29udGV4dCwgc3RhdHVzQ29kZSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBwb2xpY3lWYWxpZGF0aW9uID0gbmV3CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgcGFzc2VkID0gZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVkQXQgPSBEYXRlVGltZS5VdGNOb3csCiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbklkID0gcmVzcG9uc2VEYXRhPy52YWxpZGF0aW9uSWQgPz8gR3VpZC5OZXdHdWlkKCkuVG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBGYWlsdXJlIGRldGFpbHMKICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGVycm9ySW5mby5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZSA9IGVycm9ySW5mby5jb2RlLAogICAgICAgICAgICAgICAgICAgIGVycm9yRGVzY3JpcHRpb24gPSBlcnJvckluZm8uZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGUsCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbGVkIGNoZWNrcwogICAgICAgICAgICAgICAgICAgIGZhaWxlZENoZWNrcyA9IHJlc3BvbnNlRGF0YT8uZmFpbGVkQ2hlY2tzID8/IG5ld1tdIHsgInVua25vd24iIH0sCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gUmVjb21tZW5kYXRpb25zCiAgICAgICAgICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zID0gcmVzcG9uc2VEYXRhPy5yZWNvbW1lbmRhdGlvbnMgPz8gbmV3W10gCiAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgIlBsZWFzZSByZXZpZXcgeW91ciBhY2NvdW50IGluZm9ybWF0aW9uIGFuZCB0cnkgYWdhaW4iIAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gUmV0cnkgaW5mb3JtYXRpb24KICAgICAgICAgICAgICAgICAgICBjYW5SZXRyeSA9IHJlc3BvbnNlRGF0YT8uY2FuUmV0cnkgPz8gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICByZXRyeUFmdGVyID0gcmVzcG9uc2VEYXRhPy5yZXRyeUFmdGVyID8/IDAKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTY3JpcHRSZXNwb25zZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEtleSA9ICJwb2xpY3ktdmFsaWRhdGlvbi1mYWlsdXJlIiwKICAgICAgICAgICAgICAgICAgICBEYXRhID0gbmV3CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lWYWxpZGF0aW9uID0gcG9saWN5VmFsaWRhdGlvbgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgVGFncyA9IG5ld1tdIHsgImJhbmtpbmciLCAicG9saWN5LXZhbGlkYXRpb24iLCAiY29tcGxpYW5jZSIsICJmYWlsdXJlIiwgInJlamVjdGVkIiB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gbmV3IFNjcmlwdFJlc3BvbnNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEtleSA9ICJwb2xpY3ktdmFsaWRhdGlvbi1vdXRwdXQtZXJyb3IiLAogICAgICAgICAgICAgICAgRGF0YSA9IG5ldwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHBvbGljeVZhbGlkYXRpb24gPSBuZXcKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCA9IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9ICJJbnRlcm5hbCBwcm9jZXNzaW5nIGVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlID0gInByb2Nlc3NpbmdfZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvckRlc2NyaXB0aW9uID0gZXguTWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVkQXQgPSBEYXRlVGltZS5VdGNOb3csCiAgICAgICAgICAgICAgICAgICAgICAgIGNhblJldHJ5ID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBUYWdzID0gbmV3W10geyAiYmFua2luZyIsICJwb2xpY3ktdmFsaWRhdGlvbiIsICJlcnJvciIsICJleGNlcHRpb24iIH0KICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICB9CgogICAgI3JlZ2lvbiBIZWxwZXIgTWV0aG9kcwoKICAgIHByaXZhdGUgc3RhdGljIGludCBHZXRTdGF0dXNDb2RlRnJvbVJlc3BvbnNlKFNjcmlwdENvbnRleHQgY29udGV4dCkKICAgIHsKICAgICAgICBpZiAoY29udGV4dC5Cb2R5Py5zdGF0dXNDb2RlICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiAoaW50KWNvbnRleHQuQm9keS5zdGF0dXNDb2RlOwoKICAgICAgICByZXR1cm4gMjAwOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGR5bmFtaWM/IEdldFJlc3BvbnNlRGF0YUZyb21Db250ZXh0KFNjcmlwdENvbnRleHQgY29udGV4dCkKICAgIHsKICAgICAgICBpZiAoY29udGV4dC5Cb2R5Py5kYXRhICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LkJvZHkuZGF0YTsKCiAgICAgICAgaWYgKGNvbnRleHQuQm9keSAhPSBudWxsICYmIGNvbnRleHQuQm9keS5zdGF0dXNDb2RlID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LkJvZHk7CgogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIChzdHJpbmcgbWVzc2FnZSwgc3RyaW5nIGNvZGUsIHN0cmluZyBkZXNjcmlwdGlvbikgRXh0cmFjdEVycm9ySW5mb3JtYXRpb24oU2NyaXB0Q29udGV4dCBjb250ZXh0LCBpbnQgc3RhdHVzQ29kZSkKICAgIHsKICAgICAgICB2YXIgZXJyb3JEYXRhID0gY29udGV4dC5Cb2R5Py5kYXRhPy5lcnJvciA/PyBudWxsOwogICAgICAgIAogICAgICAgIHN0cmluZyBtZXNzYWdlID0gIlBvbGljeSB2YWxpZGF0aW9uIGZhaWxlZCI7CiAgICAgICAgc3RyaW5nIGNvZGUgPSAicG9saWN5X3Zpb2xhdGlvbiI7CiAgICAgICAgc3RyaW5nIGRlc2NyaXB0aW9uID0gIkFjY291bnQgb3BlbmluZyByZXF1ZXN0IGRvZXMgbm90IG1lZXQgcG9saWN5IHJlcXVpcmVtZW50cyI7CgogICAgICAgIGlmIChlcnJvckRhdGEgIT0gbnVsbCkKICAgICAgICB7CiAgICAgICAgICAgIG1lc3NhZ2UgPSBlcnJvckRhdGEubWVzc2FnZSA/PyBtZXNzYWdlOwogICAgICAgICAgICBjb2RlID0gZXJyb3JEYXRhLmNvZGUgPz8gY29kZTsKICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBlcnJvckRhdGEuZGVzY3JpcHRpb24gPz8gZGVzY3JpcHRpb247CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHN0YXR1c0NvZGUgPT0gNDAwKQogICAgICAgIHsKICAgICAgICAgICAgY29kZSA9ICJpbnZhbGlkX3JlcXVlc3QiOwogICAgICAgICAgICBkZXNjcmlwdGlvbiA9ICJJbnZhbGlkIGFjY291bnQgb3BlbmluZyByZXF1ZXN0IjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoc3RhdHVzQ29kZSA9PSA0MDMpCiAgICAgICAgewogICAgICAgICAgICBjb2RlID0gImNvbXBsaWFuY2VfdmlvbGF0aW9uIjsKICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAiQWNjb3VudCBvcGVuaW5nIHZpb2xhdGVzIGNvbXBsaWFuY2UgcG9saWNpZXMiOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChzdGF0dXNDb2RlID09IDQwOSkKICAgICAgICB7CiAgICAgICAgICAgIGNvZGUgPSAicG9saWN5X2NvbmZsaWN0IjsKICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAiQWNjb3VudCBvcGVuaW5nIGNvbmZsaWN0cyB3aXRoIGV4aXN0aW5nIHBvbGljaWVzIjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoc3RhdHVzQ29kZSA+PSA1MDApCiAgICAgICAgewogICAgICAgICAgICBjb2RlID0gInNlcnZlcl9lcnJvciI7CiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gIkludGVybmFsIHNlcnZlciBlcnJvciBkdXJpbmcgcG9saWN5IHZhbGlkYXRpb24iOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChtZXNzYWdlLCBjb2RlLCBkZXNjcmlwdGlvbik7CiAgICB9CgogICAgI2VuZHJlZ2lvbgp9Cg=="
            }
          }
        ],
        "onExits": [],
        "transitions": [
          {
            "key": "policies-passed",
            "target": "account-creation",
            "triggerType": 1,
            "versionStrategy": "Minor",
            "labels": [
              {
                "language": "en-US",
                "label": "Policies Passed"
              },
              {
                "language": "tr-TR",
                "label": "Politikalar Geçti"
              }
            ],
            "schema": null,
            "rule": {
              "location": "./src/PoliciesPassedRule.csx",
              "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKCi8vLyA8c3VtbWFyeT4KLy8vIFBvbGljaWVzIFBhc3NlZCBSdWxlIC0gQ2hlY2tzIGlmIHBvbGljeSB2YWxpZGF0aW9uIHdhcyBzdWNjZXNzZnVsCi8vLyBUaGlzIHJ1bGUgZGV0ZXJtaW5lcyBpZiB0aGUgYWNjb3VudCBvcGVuaW5nIHJlcXVlc3QgcGFzc2VkIGFsbCBwb2xpY3kgdmFsaWRhdGlvbnMuCi8vLyA8L3N1bW1hcnk+CnB1YmxpYyBjbGFzcyBQb2xpY2llc1Bhc3NlZFJ1bGUgOiBJQ29uZGl0aW9uTWFwcGluZwp7CiAgICAvLy8gPHN1bW1hcnk+CiAgICAvLy8gQ2hlY2sgaWYgdGhlIHBvbGljeSB2YWxpZGF0aW9uIHdhcyBzdWNjZXNzZnVsCiAgICAvLy8gPC9zdW1tYXJ5PgogICAgcHVibGljIGFzeW5jIFRhc2s8Ym9vbD4gSGFuZGxlcihTY3JpcHRDb250ZXh0IGNvbnRleHQpCiAgICB7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICAvLyBOdWxsIGNoZWNrCiAgICAgICAgICAgIGlmIChjb250ZXh0Py5JbnN0YW5jZT8uRGF0YSA9PSBudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFBvbGljeSB2YWxpZGF0aW9uIGRhdGEKICAgICAgICAgICAgdmFyIHBvbGljeVZhbGlkYXRpb24gPSBjb250ZXh0Lkluc3RhbmNlLkRhdGEucG9saWN5VmFsaWRhdGlvbjsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChwb2xpY3lWYWxpZGF0aW9uID09IG51bGwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHBvbGljeSB2YWxpZGF0aW9uIHBhc3NlZAogICAgICAgICAgICB2YXIgcGFzc2VkID0gcG9saWN5VmFsaWRhdGlvbi5wYXNzZWQgPT0gdHJ1ZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgdmFsaWRhdGlvbiBjaGVja3MKICAgICAgICAgICAgaWYgKHBhc3NlZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gRW5zdXJlIGNvbXBsaWFuY2UgY2hlY2tzIGFyZSBwcmVzZW50IGFuZCB2YWxpZAogICAgICAgICAgICAgICAgdmFyIGNvbXBsaWFuY2VDaGVja3MgPSBwb2xpY3lWYWxpZGF0aW9uLmNvbXBsaWFuY2VDaGVja3M7CiAgICAgICAgICAgICAgICBpZiAoY29tcGxpYW5jZUNoZWNrcyAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBreWNDb21wbGlhbnQgPSBjb21wbGlhbmNlQ2hlY2tzLmt5Y0NvbXBsaWFudCA9PSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHZhciBhbWxDb21wbGlhbnQgPSBjb21wbGlhbmNlQ2hlY2tzLmFtbENvbXBsaWFudCA9PSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHZhciBzYW5jdGlvbnNDaGVjayA9IGNvbXBsaWFuY2VDaGVja3Muc2FuY3Rpb25zQ2hlY2sgPT0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBwYXNzZWQgPSBwYXNzZWQgJiYga3ljQ29tcGxpYW50ICYmIGFtbENvbXBsaWFudCAmJiBzYW5jdGlvbnNDaGVjazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ2hlY2sgdmFsaWRhdGlvbiBzY29yZSBpZiBhdmFpbGFibGUKICAgICAgICAgICAgICAgIHZhciB2YWxpZGF0aW9uU2NvcmUgPSBwb2xpY3lWYWxpZGF0aW9uLnZhbGlkYXRpb25TY29yZTsKICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uU2NvcmUgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBwYXNzZWQgPSBwYXNzZWQgJiYgdmFsaWRhdGlvblNjb3JlID49IDcwOyAvLyBNaW5pbXVtIHNjb3JlIHRocmVzaG9sZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gcGFzc2VkOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQogICAgICAgIHsKICAgICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIG9jY3VycywgbG9nIGl0IGFuZCByZXR1cm4gZmFsc2UKICAgICAgICAgICAgaWYgKGNvbnRleHQ/Lk1ldGFEYXRhICE9IG51bGwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbnRleHQuTWV0YURhdGFbInBvbGljaWVzX3Bhc3NlZF9ydWxlX2Vycm9yIl0gPSBuZXcKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGV4Lk1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IGV4LkdldFR5cGUoKS5OYW1lLAogICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA9IERhdGVUaW1lLlV0Y05vdwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KfQo="
            },
            "timer": null,
            "view": null,
            "onExecutionTasks": []
          },
          {
            "key": "policies-failed",
            "target": "account-details-input",
            "triggerType": 1,
            "versionStrategy": "Minor",
            "labels": [
              {
                "language": "en-US",
                "label": "Policies Failed - Retry"
              },
              {
                "language": "tr-TR",
                "label": "Politikalar Başarısız - Tekrar Dene"
              }
            ],
            "schema": null,
            "rule": {
              "location": "./src/PoliciesFailedRule.csx",
              "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKCi8vLyA8c3VtbWFyeT4KLy8vIFBvbGljaWVzIEZhaWxlZCBSdWxlIC0gQ2hlY2tzIGlmIHBvbGljeSB2YWxpZGF0aW9uIGZhaWxlZAovLy8gVGhpcyBydWxlIGRldGVybWluZXMgaWYgdGhlIGFjY291bnQgb3BlbmluZyByZXF1ZXN0IGZhaWxlZCBwb2xpY3kgdmFsaWRhdGlvbnMuCi8vLyA8L3N1bW1hcnk+CnB1YmxpYyBjbGFzcyBQb2xpY2llc0ZhaWxlZFJ1bGUgOiBJQ29uZGl0aW9uTWFwcGluZwp7CiAgICAvLy8gPHN1bW1hcnk+CiAgICAvLy8gQ2hlY2sgaWYgdGhlIHBvbGljeSB2YWxpZGF0aW9uIGZhaWxlZAogICAgLy8vIDwvc3VtbWFyeT4KICAgIHB1YmxpYyBhc3luYyBUYXNrPGJvb2w+IEhhbmRsZXIoU2NyaXB0Q29udGV4dCBjb250ZXh0KQogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgLy8gTnVsbCBjaGVjawogICAgICAgICAgICBpZiAoY29udGV4dD8uSW5zdGFuY2U/LkRhdGEgPT0gbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIElmIG5vIGRhdGEsIGNvbnNpZGVyIGl0IGZhaWxlZAogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBQb2xpY3kgdmFsaWRhdGlvbiBkYXRhCiAgICAgICAgICAgIHZhciBwb2xpY3lWYWxpZGF0aW9uID0gY29udGV4dC5JbnN0YW5jZS5EYXRhLnBvbGljeVZhbGlkYXRpb247CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAocG9saWN5VmFsaWRhdGlvbiA9PSBudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gSWYgbm8gcG9saWN5IHZhbGlkYXRpb24gZGF0YSwgY29uc2lkZXIgaXQgZmFpbGVkCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwb2xpY3kgdmFsaWRhdGlvbiBmYWlsZWQKICAgICAgICAgICAgdmFyIGZhaWxlZCA9IHBvbGljeVZhbGlkYXRpb24ucGFzc2VkID09IGZhbHNlOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBmYWlsdXJlIGNoZWNrcwogICAgICAgICAgICBpZiAoIWZhaWxlZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gQ2hlY2sgY29tcGxpYW5jZSBmYWlsdXJlcwogICAgICAgICAgICAgICAgdmFyIGNvbXBsaWFuY2VDaGVja3MgPSBwb2xpY3lWYWxpZGF0aW9uLmNvbXBsaWFuY2VDaGVja3M7CiAgICAgICAgICAgICAgICBpZiAoY29tcGxpYW5jZUNoZWNrcyAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBreWNGYWlsZWQgPSBjb21wbGlhbmNlQ2hlY2tzLmt5Y0NvbXBsaWFudCA9PSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgYW1sRmFpbGVkID0gY29tcGxpYW5jZUNoZWNrcy5hbWxDb21wbGlhbnQgPT0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNhbmN0aW9uc0ZhaWxlZCA9IGNvbXBsaWFuY2VDaGVja3Muc2FuY3Rpb25zQ2hlY2sgPT0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0ga3ljRmFpbGVkIHx8IGFtbEZhaWxlZCB8fCBzYW5jdGlvbnNGYWlsZWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIENoZWNrIHZhbGlkYXRpb24gc2NvcmUgaWYgYXZhaWxhYmxlCiAgICAgICAgICAgICAgICB2YXIgdmFsaWRhdGlvblNjb3JlID0gcG9saWN5VmFsaWRhdGlvbi52YWxpZGF0aW9uU2NvcmU7CiAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvblNjb3JlICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gZmFpbGVkIHx8IHZhbGlkYXRpb25TY29yZSA8IDcwOyAvLyBCZWxvdyBtaW5pbXVtIHRocmVzaG9sZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3Igc3BlY2lmaWMgZXJyb3IgY29kZXMgdGhhdCBpbmRpY2F0ZSBmYWlsdXJlCiAgICAgICAgICAgICAgICB2YXIgZXJyb3JDb2RlID0gcG9saWN5VmFsaWRhdGlvbi5lcnJvckNvZGU7CiAgICAgICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KGVycm9yQ29kZT8uVG9TdHJpbmcoKSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVDb2RlcyA9IG5ld1tdIAogICAgICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgICAgICJwb2xpY3lfdmlvbGF0aW9uIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICJjb21wbGlhbmNlX3Zpb2xhdGlvbiIsIAogICAgICAgICAgICAgICAgICAgICAgICAicmlza19hc3Nlc3NtZW50X2ZhaWxlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJreWNfZmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgImFtbF9mYWlsZWQiLAogICAgICAgICAgICAgICAgICAgICAgICAic2FuY3Rpb25zX2NoZWNrX2ZhaWxlZCIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGZhaWxlZCA9IGZhaWxlZCB8fCBmYWlsdXJlQ29kZXMuQ29udGFpbnMoZXJyb3JDb2RlLlRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZmFpbGVkOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQogICAgICAgIHsKICAgICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIG9jY3VycywgbG9nIGl0IGFuZCByZXR1cm4gdHJ1ZSAoZmFpbGVkKQogICAgICAgICAgICBpZiAoY29udGV4dD8uTWV0YURhdGEgIT0gbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29udGV4dC5NZXRhRGF0YVsicG9saWNpZXNfZmFpbGVkX3J1bGVfZXJyb3IiXSA9IG5ldwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGVycm9yID0gZXguTWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICB0eXBlID0gZXguR2V0VHlwZSgpLk5hbWUsCiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wID0gRGF0ZVRpbWUuVXRjTm93CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gRXhjZXB0aW9uIG1lYW5zIGZhaWx1cmUKICAgICAgICB9CiAgICB9Cn0K"
            },
            "timer": null,
            "view": null,
            "onExecutionTasks": []
          }
        ]
      },
      {
        "key": "account-creation",
        "stateType": 2,
        "versionStrategy": "Minor",
        "labels": [
          {
            "language": "en-US",
            "label": "Account Creation"
          },
          {
            "language": "tr-TR",
            "label": "Hesap Oluşturma"
          }
        ],
        "view": {
          "key": "account-creation-failure-popup-view",
          "domain": "core",
          "version": "1.0.0",
          "flow": "sys-views"
        },
        "subFlow": null,
        "onEntries": [
          {
            "order": 1,
            "task": {
              "key": "create-bank-account",
              "domain": "core",
              "version": "1.0.0",
              "flow": "sys-tasks"
            },
            "mapping": {
              "location": "./src/CreateBankAccountMapping.csx",
              "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKdXNpbmcgQkJULldvcmtmbG93LkRlZmluaXRpb25zOwoKLy8vIDxzdW1tYXJ5PgovLy8gQ3JlYXRlIEJhbmsgQWNjb3VudCBNYXBwaW5nIC0gQ3JlYXRlcyB0aGUgYWN0dWFsIGJhbmsgYWNjb3VudCBpbiBjb3JlIGJhbmtpbmcgc3lzdGVtCi8vLyBUaGlzIG1hcHBpbmcgY3JlYXRlcyB0aGUgZGVtYW5kIGRlcG9zaXQgYWNjb3VudCBpbiB0aGUgY29yZSBiYW5raW5nIHN5c3RlbS4KLy8vIDwvc3VtbWFyeT4KcHVibGljIGNsYXNzIENyZWF0ZUJhbmtBY2NvdW50TWFwcGluZyA6IElNYXBwaW5nCnsKICAgIHB1YmxpYyBUYXNrPFNjcmlwdFJlc3BvbnNlPiBJbnB1dEhhbmRsZXIoV29ya2Zsb3dUYXNrIHRhc2ssIFNjcmlwdENvbnRleHQgY29udGV4dCkKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIHZhciBodHRwVGFzayA9IHRhc2sgYXMgSHR0cFRhc2s7CiAgICAgICAgICAgIGlmIChodHRwVGFzayA9PSBudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigiVGFzayBtdXN0IGJlIGFuIEh0dHBUYXNrIGZvciBhY2NvdW50IGNyZWF0aW9uIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEdldCBhbGwgcmVxdWlyZWQgZGF0YSBmcm9tIHdvcmtmbG93IGNvbnRleHQKICAgICAgICAgICAgdmFyIHVzZXJTZXNzaW9uID0gY29udGV4dC5JbnN0YW5jZT8uRGF0YT8udXNlclNlc3Npb247CiAgICAgICAgICAgIHZhciBhY2NvdW50RGV0YWlscyA9IGNvbnRleHQuSW5zdGFuY2U/LkRhdGE/LmFjY291bnREZXRhaWxzOwogICAgICAgICAgICB2YXIgYWNjb3VudFR5cGUgPSBjb250ZXh0Lkluc3RhbmNlPy5EYXRhPy5hY2NvdW50VHlwZTsKICAgICAgICAgICAgdmFyIHBvbGljeVZhbGlkYXRpb24gPSBjb250ZXh0Lkluc3RhbmNlPy5EYXRhPy5wb2xpY3lWYWxpZGF0aW9uOwogICAgICAgICAgICB2YXIgY29uZmlybWF0aW9uID0gY29udGV4dC5JbnN0YW5jZT8uRGF0YT8uY29uZmlybWF0aW9uOwoKICAgICAgICAgICAgLy8gUHJlcGFyZSB0aGUgcmVxdWVzdCBib2R5IGZvciBhY2NvdW50IGNyZWF0aW9uCiAgICAgICAgICAgIHZhciByZXF1ZXN0Qm9keSA9IG5ldwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAvLyBBY2NvdW50IGluZm9ybWF0aW9uCiAgICAgICAgICAgICAgICBhY2NvdW50VHlwZSA9IGFjY291bnRUeXBlPy5hY2NvdW50VHlwZSA/PyAiZGVtYW5kLWRlcG9zaXQiLAogICAgICAgICAgICAgICAgYWNjb3VudE5hbWUgPSBhY2NvdW50RGV0YWlscz8uYWNjb3VudE5hbWUsCiAgICAgICAgICAgICAgICBjdXJyZW5jeSA9IGFjY291bnREZXRhaWxzPy5jdXJyZW5jeSwKICAgICAgICAgICAgICAgIGJyYW5jaENvZGUgPSBhY2NvdW50RGV0YWlscz8uYnJhbmNoQ29kZSwKICAgICAgICAgICAgICAgIGluaXRpYWxEZXBvc2l0ID0gYWNjb3VudERldGFpbHM/LmluaXRpYWxEZXBvc2l0ID8/IDAsCiAgICAgICAgICAgICAgICBhY2NvdW50UHVycG9zZSA9IGFjY291bnREZXRhaWxzPy5hY2NvdW50UHVycG9zZSwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ3VzdG9tZXIgaW5mb3JtYXRpb24KICAgICAgICAgICAgICAgIGN1c3RvbWVySWQgPSB1c2VyU2Vzc2lvbj8udXNlcklkLAogICAgICAgICAgICAgICAgY3VzdG9tZXJFbWFpbCA9IHVzZXJTZXNzaW9uPy51c2VyRW1haWwsCiAgICAgICAgICAgICAgICBjdXN0b21lclNlZ21lbnQgPSB1c2VyU2Vzc2lvbj8uY3VzdG9tZXJTZWdtZW50LAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBBY2NvdW50IGxpbWl0cyBmcm9tIHBvbGljeSB2YWxpZGF0aW9uCiAgICAgICAgICAgICAgICBhY2NvdW50TGltaXRzID0gcG9saWN5VmFsaWRhdGlvbj8uYWNjb3VudExpbWl0cyA/PyBuZXcKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBkYWlseVRyYW5zYWN0aW9uTGltaXQgPSA1MDAwMCwKICAgICAgICAgICAgICAgICAgICBtb250aGx5VHJhbnNhY3Rpb25MaW1pdCA9IDUwMDAwMCwKICAgICAgICAgICAgICAgICAgICBtaW5pbXVtQmFsYW5jZSA9IDAsCiAgICAgICAgICAgICAgICAgICAgbWF4aW11bUJhbGFuY2UgPSAxMDAwMDAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBOb3RpZmljYXRpb24gcHJlZmVyZW5jZXMKICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMgPSBhY2NvdW50RGV0YWlscz8ubm90aWZpY2F0aW9ucyA/PyBuZXcKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzbXNOb3RpZmljYXRpb25zID0gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBlbWFpbE5vdGlmaWNhdGlvbnMgPSB0cnVlLAogICAgICAgICAgICAgICAgICAgIHB1c2hOb3RpZmljYXRpb25zID0gdHJ1ZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ29tcGxpYW5jZSBhbmQgYXVkaXQgaW5mb3JtYXRpb24KICAgICAgICAgICAgICAgIGNvbXBsaWFuY2VJbmZvID0gbmV3CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbklkID0gcG9saWN5VmFsaWRhdGlvbj8udmFsaWRhdGlvbklkLAogICAgICAgICAgICAgICAgICAgIHBvbGljeVZlcnNpb24gPSBwb2xpY3lWYWxpZGF0aW9uPy5wb2xpY3lWZXJzaW9uLAogICAgICAgICAgICAgICAgICAgIHRlcm1zQWNjZXB0ZWQgPSBjb25maXJtYXRpb24/LnRlcm1zQWNjZXB0ZWQsCiAgICAgICAgICAgICAgICAgICAgcHJpdmFjeVBvbGljeUFjY2VwdGVkID0gY29uZmlybWF0aW9uPy5wcml2YWN5UG9saWN5QWNjZXB0ZWQsCiAgICAgICAgICAgICAgICAgICAgbWFya2V0aW5nQ29uc2VudCA9IGNvbmZpcm1hdGlvbj8ubWFya2V0aW5nQ29uc2VudCwKICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRBdCA9IGNvbmZpcm1hdGlvbj8uY29uZmlybWVkQXQsCiAgICAgICAgICAgICAgICAgICAgaXBBZGRyZXNzID0gY29uZmlybWF0aW9uPy5pcEFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgdXNlckFnZW50ID0gY29uZmlybWF0aW9uPy51c2VyQWdlbnQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgbWV0YWRhdGEKICAgICAgICAgICAgICAgIHJlcXVlc3RJZCA9IGNvbnRleHQuSGVhZGVycz9bIngtcmVxdWVzdC1pZCJdID8/IEd1aWQuTmV3R3VpZCgpLlRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICB3b3JrZmxvd0luc3RhbmNlSWQgPSBjb250ZXh0Lkluc3RhbmNlPy5JZC5Ub1N0cmluZygpLAogICAgICAgICAgICAgICAgcmVxdWVzdGVkQXQgPSBEYXRlVGltZS5VdGNOb3csCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgY29udGV4dAogICAgICAgICAgICAgICAgY2hhbm5lbCA9ICJkaWdpdGFsLWJhbmtpbmciLAogICAgICAgICAgICAgICAgc291cmNlID0gImFjY291bnQtb3BlbmluZy13b3JrZmxvdyIKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGh0dHBUYXNrLlNldEJvZHkocmVxdWVzdEJvZHkpOwoKICAgICAgICAgICAgLy8gU2V0IEhlYWRlcnMKICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz8+CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFsiQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICBbIkF1dGhvcml6YXRpb24iXSA9IGNvbnRleHQuSGVhZGVycz9bImF1dGhvcml6YXRpb24iXSwKICAgICAgICAgICAgICAgIFsiWC1Vc2VyLUlkIl0gPSB1c2VyU2Vzc2lvbj8udXNlcklkPy5Ub1N0cmluZygpLAogICAgICAgICAgICAgICAgWyJYLVJlcXVlc3QtSWQiXSA9IHJlcXVlc3RCb2R5LnJlcXVlc3RJZCwKICAgICAgICAgICAgICAgIFsiWC1Xb3JrZmxvdy1JbnN0YW5jZSJdID0gY29udGV4dC5JbnN0YW5jZT8uSWQuVG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgIFsiWC1BY2NvdW50LVR5cGUiXSA9IGFjY291bnRUeXBlPy5hY2NvdW50VHlwZT8uVG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgIFsiWC1DdXJyZW5jeSJdID0gYWNjb3VudERldGFpbHM/LmN1cnJlbmN5Py5Ub1N0cmluZygpLAogICAgICAgICAgICAgICAgWyJYLUJyYW5jaC1Db2RlIl0gPSBhY2NvdW50RGV0YWlscz8uYnJhbmNoQ29kZT8uVG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgIFsiWC1WYWxpZGF0aW9uLUlkIl0gPSBwb2xpY3lWYWxpZGF0aW9uPy52YWxpZGF0aW9uSWQ/LlRvU3RyaW5nKCkKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGh0dHBUYXNrLlNldEhlYWRlcnMoaGVhZGVycyk7CgogICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0KG5ldyBTY3JpcHRSZXNwb25zZSgpKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBleCkKICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQobmV3IFNjcmlwdFJlc3BvbnNlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gPHN1bW1hcnk+CiAgICAvLy8gUHJvY2VzcyB0aGUgYWNjb3VudCBjcmVhdGlvbiByZXN1bHQgYW5kIG1lcmdlIGl0IGludG8gdGhlIHdvcmtmbG93IGluc3RhbmNlCiAgICAvLy8gPC9zdW1tYXJ5PgogICAgcHVibGljIGFzeW5jIFRhc2s8U2NyaXB0UmVzcG9uc2U+IE91dHB1dEhhbmRsZXIoU2NyaXB0Q29udGV4dCBjb250ZXh0KQogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgdmFyIHN0YXR1c0NvZGUgPSBHZXRTdGF0dXNDb2RlRnJvbVJlc3BvbnNlKGNvbnRleHQpOwogICAgICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gR2V0UmVzcG9uc2VEYXRhRnJvbUNvbnRleHQoY29udGV4dCk7CgogICAgICAgICAgICAvLyBTdWNjZXNzZnVsIGFjY291bnQgY3JlYXRpb24KICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPCAzMDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBhY2NvdW50Q3JlYXRpb24gPSBuZXcKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQgPSBEYXRlVGltZS5VdGNOb3csCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQWNjb3VudCBkZXRhaWxzCiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkID0gcmVzcG9uc2VEYXRhPy5hY2NvdW50SWQgPz8gR3VpZC5OZXdHdWlkKCkuVG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICBhY2NvdW50TnVtYmVyID0gcmVzcG9uc2VEYXRhPy5hY2NvdW50TnVtYmVyLAogICAgICAgICAgICAgICAgICAgIGliYW4gPSByZXNwb25zZURhdGE/LmliYW4sCiAgICAgICAgICAgICAgICAgICAgYWNjb3VudFR5cGUgPSByZXNwb25zZURhdGE/LmFjY291bnRUeXBlID8/ICJkZW1hbmQtZGVwb3NpdCIsCiAgICAgICAgICAgICAgICAgICAgY3VycmVuY3kgPSByZXNwb25zZURhdGE/LmN1cnJlbmN5LAogICAgICAgICAgICAgICAgICAgIGJyYW5jaENvZGUgPSByZXNwb25zZURhdGE/LmJyYW5jaENvZGUsCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQWNjb3VudCBzdGF0dXMKICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSByZXNwb25zZURhdGE/LnN0YXR1cyA/PyAiYWN0aXZlIiwKICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZSA9IHJlc3BvbnNlRGF0YT8uaXNBY3RpdmUgPz8gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBCYWxhbmNlIGluZm9ybWF0aW9uCiAgICAgICAgICAgICAgICAgICAgY3VycmVudEJhbGFuY2UgPSByZXNwb25zZURhdGE/LmN1cnJlbnRCYWxhbmNlID8/IDAsCiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlQmFsYW5jZSA9IHJlc3BvbnNlRGF0YT8uYXZhaWxhYmxlQmFsYW5jZSA/PyAwLAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIEFjY291bnQgbGltaXRzCiAgICAgICAgICAgICAgICAgICAgbGltaXRzID0gcmVzcG9uc2VEYXRhPy5saW1pdHMgPz8gbmV3CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBkYWlseVRyYW5zYWN0aW9uTGltaXQgPSA1MDAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhseVRyYW5zYWN0aW9uTGltaXQgPSA1MDAwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW1CYWxhbmNlID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bUJhbGFuY2UgPSAxMDAwMDAwCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBDYXJkcyBhbmQgc2VydmljZXMKICAgICAgICAgICAgICAgICAgICBkZWJpdENhcmRSZXF1ZXN0ZWQgPSByZXNwb25zZURhdGE/LmRlYml0Q2FyZFJlcXVlc3RlZCA/PyBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBvbmxpbmVCYW5raW5nRW5hYmxlZCA9IHJlc3BvbnNlRGF0YT8ub25saW5lQmFua2luZ0VuYWJsZWQgPz8gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBtb2JpbGVCYW5raW5nRW5hYmxlZCA9IHJlc3BvbnNlRGF0YT8ubW9iaWxlQmFua2luZ0VuYWJsZWQgPz8gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBNZXRhZGF0YQogICAgICAgICAgICAgICAgICAgIGNyZWF0aW9uUmVmZXJlbmNlID0gcmVzcG9uc2VEYXRhPy5jcmVhdGlvblJlZmVyZW5jZSA/PyBHdWlkLk5ld0d1aWQoKS5Ub1N0cmluZygpLAogICAgICAgICAgICAgICAgICAgIGNvcmVCYW5raW5nSWQgPSByZXNwb25zZURhdGE/LmNvcmVCYW5raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBzZXJ2aWNlcwogICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzID0gcmVzcG9uc2VEYXRhPy5zZXJ2aWNlcyA/PyBuZXdbXQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgIm9ubGluZS1iYW5raW5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgIm1vYmlsZS1iYW5raW5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgInNtcy1iYW5raW5nIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTY3JpcHRSZXNwb25zZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEtleSA9ICJhY2NvdW50LWNyZWF0aW9uLXN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIERhdGEgPSBuZXcKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRDcmVhdGlvbiA9IGFjY291bnRDcmVhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5jbHVkZSBzdW1tYXJ5IGZvciBzdWNjZXNzIHZpZXcKICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFN1bW1hcnkgPSBuZXcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE51bWJlciA9IGFjY291bnRDcmVhdGlvbi5hY2NvdW50TnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWJhbiA9IGFjY291bnRDcmVhdGlvbi5pYmFuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFR5cGUgPSBhY2NvdW50Q3JlYXRpb24uYWNjb3VudFR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeSA9IGFjY291bnRDcmVhdGlvbi5jdXJyZW5jeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IGFjY291bnRDcmVhdGlvbi5zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQgPSBhY2NvdW50Q3JlYXRpb24uY3JlYXRlZEF0CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIFRhZ3MgPSBuZXdbXSB7ICJiYW5raW5nIiwgImFjY291bnQtY3JlYXRpb24iLCAic3VjY2VzcyIsICJhY2NvdW50LW9wZW5lZCIsICJjb3JlLWJhbmtpbmciIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gRmFpbGVkIGFjY291bnQgY3JlYXRpb24KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZXJyb3JJbmZvID0gRXh0cmFjdEVycm9ySW5mb3JtYXRpb24oY29udGV4dCwgc3RhdHVzQ29kZSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBhY2NvdW50Q3JlYXRpb24gPSBuZXcKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0ID0gRGF0ZVRpbWUuVXRjTm93LAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIEVycm9yIGRldGFpbHMKICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGVycm9ySW5mby5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZSA9IGVycm9ySW5mby5jb2RlLAogICAgICAgICAgICAgICAgICAgIGVycm9yRGVzY3JpcHRpb24gPSBlcnJvckluZm8uZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGUsCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbHVyZSBhbmFseXNpcwogICAgICAgICAgICAgICAgICAgIGZhaWx1cmVSZWFzb24gPSByZXNwb25zZURhdGE/LmZhaWx1cmVSZWFzb24gPz8gInVua25vd24iLAogICAgICAgICAgICAgICAgICAgIGZhaWx1cmVDYXRlZ29yeSA9IHJlc3BvbnNlRGF0YT8uZmFpbHVyZUNhdGVnb3J5ID8/ICJzeXN0ZW1fZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFJldHJ5IGluZm9ybWF0aW9uCiAgICAgICAgICAgICAgICAgICAgY2FuUmV0cnkgPSByZXNwb25zZURhdGE/LmNhblJldHJ5ID8/IHRydWUsCiAgICAgICAgICAgICAgICAgICAgcmV0cnlBZnRlciA9IHJlc3BvbnNlRGF0YT8ucmV0cnlBZnRlciA/PyAzMDAsIC8vIDUgbWludXRlcwogICAgICAgICAgICAgICAgICAgIG1heFJldHJpZXMgPSByZXNwb25zZURhdGE/Lm1heFJldHJpZXMgPz8gMywKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBSZWNvbW1lbmRhdGlvbnMKICAgICAgICAgICAgICAgICAgICByZWNvbW1lbmRhdGlvbnMgPSByZXNwb25zZURhdGE/LnJlY29tbWVuZGF0aW9ucyA/PyBuZXdbXQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgIlBsZWFzZSBjaGVjayB5b3VyIGFjY291bnQgaW5mb3JtYXRpb24gYW5kIHRyeSBhZ2FpbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJJZiB0aGUgcHJvYmxlbSBwZXJzaXN0cywgY29udGFjdCBjdXN0b21lciBzdXBwb3J0IgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gU3VwcG9ydCBpbmZvcm1hdGlvbgogICAgICAgICAgICAgICAgICAgIHN1cHBvcnRSZWZlcmVuY2UgPSByZXNwb25zZURhdGE/LnN1cHBvcnRSZWZlcmVuY2UgPz8gR3VpZC5OZXdHdWlkKCkuVG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBNZXRhZGF0YQogICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZCA9IGNvbnRleHQuSGVhZGVycz9bIngtcmVxdWVzdC1pZCJdLAogICAgICAgICAgICAgICAgICAgIHdvcmtmbG93SW5zdGFuY2VJZCA9IGNvbnRleHQuSW5zdGFuY2U/LklkLlRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTY3JpcHRSZXNwb25zZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEtleSA9ICJhY2NvdW50LWNyZWF0aW9uLWZhaWx1cmUiLAogICAgICAgICAgICAgICAgICAgIERhdGEgPSBuZXcKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRDcmVhdGlvbiA9IGFjY291bnRDcmVhdGlvbgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgVGFncyA9IG5ld1tdIHsgImJhbmtpbmciLCAiYWNjb3VudC1jcmVhdGlvbiIsICJmYWlsdXJlIiwgImVycm9yIiwgImNvcmUtYmFua2luZy1lcnJvciIgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBTY3JpcHRSZXNwb25zZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBLZXkgPSAiYWNjb3VudC1jcmVhdGlvbi1vdXRwdXQtZXJyb3IiLAogICAgICAgICAgICAgICAgRGF0YSA9IG5ldwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGFjY291bnRDcmVhdGlvbiA9IG5ldwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9ICJJbnRlcm5hbCBwcm9jZXNzaW5nIGVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlID0gInByb2Nlc3NpbmdfZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvckRlc2NyaXB0aW9uID0gZXguTWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0ID0gRGF0ZVRpbWUuVXRjTm93LAogICAgICAgICAgICAgICAgICAgICAgICBjYW5SZXRyeSA9IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRSZWZlcmVuY2UgPSBHdWlkLk5ld0d1aWQoKS5Ub1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFRhZ3MgPSBuZXdbXSB7ICJiYW5raW5nIiwgImFjY291bnQtY3JlYXRpb24iLCAiZXJyb3IiLCAiZXhjZXB0aW9uIiwgInByb2Nlc3NpbmctZXJyb3IiIH0KICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICB9CgogICAgI3JlZ2lvbiBIZWxwZXIgTWV0aG9kcwoKICAgIHByaXZhdGUgc3RhdGljIGludCBHZXRTdGF0dXNDb2RlRnJvbVJlc3BvbnNlKFNjcmlwdENvbnRleHQgY29udGV4dCkKICAgIHsKICAgICAgICBpZiAoY29udGV4dC5Cb2R5Py5zdGF0dXNDb2RlICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiAoaW50KWNvbnRleHQuQm9keS5zdGF0dXNDb2RlOwoKICAgICAgICByZXR1cm4gMjAwOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGR5bmFtaWM/IEdldFJlc3BvbnNlRGF0YUZyb21Db250ZXh0KFNjcmlwdENvbnRleHQgY29udGV4dCkKICAgIHsKICAgICAgICBpZiAoY29udGV4dC5Cb2R5Py5kYXRhICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LkJvZHkuZGF0YTsKCiAgICAgICAgaWYgKGNvbnRleHQuQm9keSAhPSBudWxsICYmIGNvbnRleHQuQm9keS5zdGF0dXNDb2RlID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LkJvZHk7CgogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIChzdHJpbmcgbWVzc2FnZSwgc3RyaW5nIGNvZGUsIHN0cmluZyBkZXNjcmlwdGlvbikgRXh0cmFjdEVycm9ySW5mb3JtYXRpb24oU2NyaXB0Q29udGV4dCBjb250ZXh0LCBpbnQgc3RhdHVzQ29kZSkKICAgIHsKICAgICAgICB2YXIgZXJyb3JEYXRhID0gY29udGV4dC5Cb2R5Py5kYXRhPy5lcnJvciA/PyBudWxsOwogICAgICAgIAogICAgICAgIHN0cmluZyBtZXNzYWdlID0gIkFjY291bnQgY3JlYXRpb24gZmFpbGVkIjsKICAgICAgICBzdHJpbmcgY29kZSA9ICJhY2NvdW50X2NyZWF0aW9uX2Vycm9yIjsKICAgICAgICBzdHJpbmcgZGVzY3JpcHRpb24gPSAiVW5hYmxlIHRvIGNyZWF0ZSB0aGUgYmFuayBhY2NvdW50IjsKCiAgICAgICAgaWYgKGVycm9yRGF0YSAhPSBudWxsKQogICAgICAgIHsKICAgICAgICAgICAgbWVzc2FnZSA9IGVycm9yRGF0YS5tZXNzYWdlID8/IG1lc3NhZ2U7CiAgICAgICAgICAgIGNvZGUgPSBlcnJvckRhdGEuY29kZSA/PyBjb2RlOwogICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGVycm9yRGF0YS5kZXNjcmlwdGlvbiA/PyBkZXNjcmlwdGlvbjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoc3RhdHVzQ29kZSA9PSA0MDApCiAgICAgICAgewogICAgICAgICAgICBjb2RlID0gImludmFsaWRfYWNjb3VudF9kYXRhIjsKICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAiSW52YWxpZCBhY2NvdW50IGNyZWF0aW9uIGRhdGEgcHJvdmlkZWQiOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChzdGF0dXNDb2RlID09IDQwOSkKICAgICAgICB7CiAgICAgICAgICAgIGNvZGUgPSAiYWNjb3VudF9hbHJlYWR5X2V4aXN0cyI7CiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gIkFuIGFjY291bnQgd2l0aCBzaW1pbGFyIGRldGFpbHMgYWxyZWFkeSBleGlzdHMiOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChzdGF0dXNDb2RlID09IDQyMikKICAgICAgICB7CiAgICAgICAgICAgIGNvZGUgPSAidmFsaWRhdGlvbl9lcnJvciI7CiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gIkFjY291bnQgZGF0YSB2YWxpZGF0aW9uIGZhaWxlZCI7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHN0YXR1c0NvZGUgPj0gNTAwKQogICAgICAgIHsKICAgICAgICAgICAgY29kZSA9ICJjb3JlX2JhbmtpbmdfZXJyb3IiOwogICAgICAgICAgICBkZXNjcmlwdGlvbiA9ICJDb3JlIGJhbmtpbmcgc3lzdGVtIGVycm9yIGR1cmluZyBhY2NvdW50IGNyZWF0aW9uIjsKICAgICAgICB9CgogICAgICAgIHJldHVybiAobWVzc2FnZSwgY29kZSwgZGVzY3JpcHRpb24pOwogICAgfQoKICAgICNlbmRyZWdpb24KfQo="
            }
          }
        ],
        "onExits": [],
        "transitions": [
          {
            "key": "account-created-successfully",
            "target": "account-opening-success",
            "triggerType": 1,
            "versionStrategy": "Minor",
            "labels": [
              {
                "language": "en-US",
                "label": "Account Created Successfully"
              },
              {
                "language": "tr-TR",
                "label": "Hesap Başarıyla Oluşturuldu"
              }
            ],
            "schema": null,
            "rule": {
              "location": "./src/AccountCreatedSuccessfullyRule.csx",
              "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKCi8vLyA8c3VtbWFyeT4KLy8vIEFjY291bnQgQ3JlYXRlZCBTdWNjZXNzZnVsbHkgUnVsZSAtIENoZWNrcyBpZiBhY2NvdW50IGNyZWF0aW9uIHdhcyBzdWNjZXNzZnVsCi8vLyBUaGlzIHJ1bGUgZGV0ZXJtaW5lcyBpZiB0aGUgYmFuayBhY2NvdW50IHdhcyBzdWNjZXNzZnVsbHkgY3JlYXRlZCBpbiB0aGUgY29yZSBiYW5raW5nIHN5c3RlbS4KLy8vIDwvc3VtbWFyeT4KcHVibGljIGNsYXNzIEFjY291bnRDcmVhdGVkU3VjY2Vzc2Z1bGx5UnVsZSA6IElDb25kaXRpb25NYXBwaW5nCnsKICAgIC8vLyA8c3VtbWFyeT4KICAgIC8vLyBDaGVjayBpZiB0aGUgYWNjb3VudCBjcmVhdGlvbiB3YXMgc3VjY2Vzc2Z1bAogICAgLy8vIDwvc3VtbWFyeT4KICAgIHB1YmxpYyBhc3luYyBUYXNrPGJvb2w+IEhhbmRsZXIoU2NyaXB0Q29udGV4dCBjb250ZXh0KQogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgLy8gTnVsbCBjaGVjawogICAgICAgICAgICBpZiAoY29udGV4dD8uSW5zdGFuY2U/LkRhdGEgPT0gbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBBY2NvdW50IGNyZWF0aW9uIGRhdGEKICAgICAgICAgICAgdmFyIGFjY291bnRDcmVhdGlvbiA9IGNvbnRleHQuSW5zdGFuY2UuRGF0YS5hY2NvdW50Q3JlYXRpb247CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoYWNjb3VudENyZWF0aW9uID09IG51bGwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGFjY291bnQgY3JlYXRpb24gd2FzIHN1Y2Nlc3NmdWwKICAgICAgICAgICAgdmFyIHN1Y2Nlc3MgPSBhY2NvdW50Q3JlYXRpb24uc3VjY2VzcyA9PSB0cnVlOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQWRkaXRpb25hbCB2YWxpZGF0aW9uIGNoZWNrcyBmb3Igc3VjY2Vzc2Z1bCBjcmVhdGlvbgogICAgICAgICAgICBpZiAoc3VjY2VzcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gRW5zdXJlIGVzc2VudGlhbCBhY2NvdW50IGRldGFpbHMgYXJlIHByZXNlbnQKICAgICAgICAgICAgICAgIHZhciBhY2NvdW50SWQgPSBhY2NvdW50Q3JlYXRpb24uYWNjb3VudElkOwogICAgICAgICAgICAgICAgdmFyIGFjY291bnROdW1iZXIgPSBhY2NvdW50Q3JlYXRpb24uYWNjb3VudE51bWJlcjsKICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSBhY2NvdW50Q3JlYXRpb24uc3RhdHVzOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBBY2NvdW50IG11c3QgaGF2ZSBJRCBhbmQgbnVtYmVyCiAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoYWNjb3VudElkPy5Ub1N0cmluZygpKSB8fCAKICAgICAgICAgICAgICAgICAgICBzdHJpbmcuSXNOdWxsT3JFbXB0eShhY2NvdW50TnVtYmVyPy5Ub1N0cmluZygpKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEFjY291bnQgc3RhdHVzIHNob3VsZCBiZSBhY3RpdmUKICAgICAgICAgICAgICAgIGlmIChzdGF0dXM/LlRvU3RyaW5nKCkgIT0gImFjdGl2ZSIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhY2NvdW50IGlzIG1hcmtlZCBhcyBhY3RpdmUKICAgICAgICAgICAgICAgIHZhciBpc0FjdGl2ZSA9IGFjY291bnRDcmVhdGlvbi5pc0FjdGl2ZTsKICAgICAgICAgICAgICAgIGlmIChpc0FjdGl2ZSAhPSB0cnVlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gVmVyaWZ5IElCQU4gaXMgcHJlc2VudCBmb3IgY2VydGFpbiBjdXJyZW5jaWVzCiAgICAgICAgICAgICAgICB2YXIgY3VycmVuY3kgPSBhY2NvdW50Q3JlYXRpb24uY3VycmVuY3k/LlRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB2YXIgaWJhbiA9IGFjY291bnRDcmVhdGlvbi5pYmFuOwogICAgICAgICAgICAgICAgaWYgKChjdXJyZW5jeSA9PSAiRVVSIiB8fCBjdXJyZW5jeSA9PSAiVVNEIiB8fCBjdXJyZW5jeSA9PSAiR0JQIikgJiYgCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nLklzTnVsbE9yRW1wdHkoaWJhbj8uVG9TdHJpbmcoKSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgLy8gSUJBTiBtaWdodCBiZSByZXF1aXJlZCBmb3IgaW50ZXJuYXRpb25hbCBjdXJyZW5jaWVzCiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBjb25maWd1cmFibGUgYmFzZWQgb24gYmFuayBwb2xpY2llcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBDaGVjayBjcmVhdGlvbiB0aW1lc3RhbXAgaXMgcmVjZW50ICh3aXRoaW4gbGFzdCBob3VyKQogICAgICAgICAgICAgICAgdmFyIGNyZWF0ZWRBdCA9IGFjY291bnRDcmVhdGlvbi5jcmVhdGVkQXQ7CiAgICAgICAgICAgICAgICBEYXRlVGltZSBjcmVhdGlvblRpbWUgPSBkZWZhdWx0OwogICAgICAgICAgICAgICAgaWYgKGNyZWF0ZWRBdCAhPSBudWxsICYmIERhdGVUaW1lLlRyeVBhcnNlKGNyZWF0ZWRBdC5Ub1N0cmluZygpLCBvdXQgY3JlYXRpb25UaW1lKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdGltZURpZmYgPSBEYXRlVGltZS5VdGNOb3cgLSBjcmVhdGlvblRpbWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVEaWZmLlRvdGFsSG91cnMgPiAxKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRpb24gdGltZXN0YW1wIGlzIHRvbyBvbGQsIG1pZ2h0IGJlIHN0YWxlIGRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpCiAgICAgICAgewogICAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gb2NjdXJzLCBsb2cgaXQgYW5kIHJldHVybiBmYWxzZQogICAgICAgICAgICBpZiAoY29udGV4dD8uTWV0YURhdGEgIT0gbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29udGV4dC5NZXRhRGF0YVsiYWNjb3VudF9jcmVhdGVkX3N1Y2Nlc3NmdWxseV9ydWxlX2Vycm9yIl0gPSBuZXcKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGV4Lk1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IGV4LkdldFR5cGUoKS5OYW1lLAogICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA9IERhdGVUaW1lLlV0Y05vdwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KfQo="
            },
            "timer": null,
            "view": null,
            "onExecutionTasks": []
          },
          {
            "key": "account-creation-failed",
            "target": "account-details-input",
            "triggerType": 1,
            "versionStrategy": "Minor",
            "labels": [
              {
                "language": "en-US",
                "label": "Account Creation Failed - Retry"
              },
              {
                "language": "tr-TR",
                "label": "Hesap Oluşturma Başarısız - Tekrar Dene"
              }
            ],
            "schema": null,
            "rule": {
              "location": "./src/AccountCreationFailedRule.csx",
              "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKCi8vLyA8c3VtbWFyeT4KLy8vIEFjY291bnQgQ3JlYXRpb24gRmFpbGVkIFJ1bGUgLSBDaGVja3MgaWYgYWNjb3VudCBjcmVhdGlvbiBmYWlsZWQKLy8vIFRoaXMgcnVsZSBkZXRlcm1pbmVzIGlmIHRoZSBiYW5rIGFjY291bnQgY3JlYXRpb24gZmFpbGVkIGluIHRoZSBjb3JlIGJhbmtpbmcgc3lzdGVtLgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgQWNjb3VudENyZWF0aW9uRmFpbGVkUnVsZSA6IElDb25kaXRpb25NYXBwaW5nCnsKICAgIC8vLyA8c3VtbWFyeT4KICAgIC8vLyBDaGVjayBpZiB0aGUgYWNjb3VudCBjcmVhdGlvbiBmYWlsZWQKICAgIC8vLyA8L3N1bW1hcnk+CiAgICBwdWJsaWMgYXN5bmMgVGFzazxib29sPiBIYW5kbGVyKFNjcmlwdENvbnRleHQgY29udGV4dCkKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIC8vIE51bGwgY2hlY2sKICAgICAgICAgICAgaWYgKGNvbnRleHQ/Lkluc3RhbmNlPy5EYXRhID09IG51bGwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBJZiBubyBkYXRhLCBjb25zaWRlciBpdCBmYWlsZWQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQWNjb3VudCBjcmVhdGlvbiBkYXRhCiAgICAgICAgICAgIHZhciBhY2NvdW50Q3JlYXRpb24gPSBjb250ZXh0Lkluc3RhbmNlLkRhdGEuYWNjb3VudENyZWF0aW9uOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKGFjY291bnRDcmVhdGlvbiA9PSBudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gSWYgbm8gYWNjb3VudCBjcmVhdGlvbiBkYXRhLCBjb25zaWRlciBpdCBmYWlsZWQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGFjY291bnQgY3JlYXRpb24gZmFpbGVkCiAgICAgICAgICAgIHZhciBmYWlsZWQgPSBhY2NvdW50Q3JlYXRpb24uc3VjY2VzcyA9PSBmYWxzZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgZmFpbHVyZSBjaGVja3MKICAgICAgICAgICAgaWYgKCFmYWlsZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBtaXNzaW5nIGVzc2VudGlhbCBkYXRhIGV2ZW4gaWYgbWFya2VkIGFzIHN1Y2Nlc3MKICAgICAgICAgICAgICAgIHZhciBhY2NvdW50SWQgPSBhY2NvdW50Q3JlYXRpb24uYWNjb3VudElkOwogICAgICAgICAgICAgICAgdmFyIGFjY291bnROdW1iZXIgPSBhY2NvdW50Q3JlYXRpb24uYWNjb3VudE51bWJlcjsKICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSBhY2NvdW50Q3JlYXRpb24uc3RhdHVzOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBNaXNzaW5nIGVzc2VudGlhbCBhY2NvdW50IGRldGFpbHMgaW5kaWNhdGVzIGZhaWx1cmUKICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShhY2NvdW50SWQ/LlRvU3RyaW5nKCkpIHx8IAogICAgICAgICAgICAgICAgICAgIHN0cmluZy5Jc051bGxPckVtcHR5KGFjY291bnROdW1iZXI/LlRvU3RyaW5nKCkpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGZhaWxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIE5vbi1hY3RpdmUgc3RhdHVzIGluZGljYXRlcyBmYWlsdXJlCiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzPy5Ub1N0cmluZygpICE9ICJhY3RpdmUiKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGZhaWxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFjY291bnQgaXMgbWFya2VkIGFzIGluYWN0aXZlCiAgICAgICAgICAgICAgICB2YXIgaXNBY3RpdmUgPSBhY2NvdW50Q3JlYXRpb24uaXNBY3RpdmU7CiAgICAgICAgICAgICAgICBpZiAoaXNBY3RpdmUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHNwZWNpZmljIGVycm9yIGluZGljYXRvcnMKICAgICAgICAgICAgICAgIHZhciBlcnJvckNvZGUgPSBhY2NvdW50Q3JlYXRpb24uZXJyb3JDb2RlOwogICAgICAgICAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShlcnJvckNvZGU/LlRvU3RyaW5nKCkpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlQ29kZXMgPSBuZXdbXSAKICAgICAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICAgICAiYWNjb3VudF9jcmVhdGlvbl9lcnJvciIsIAogICAgICAgICAgICAgICAgICAgICAgICAiY29yZV9iYW5raW5nX2Vycm9yIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICJpbnZhbGlkX2FjY291bnRfZGF0YSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJhY2NvdW50X2FscmVhZHlfZXhpc3RzIiwKICAgICAgICAgICAgICAgICAgICAgICAgInZhbGlkYXRpb25fZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICAic3lzdGVtX2Vycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgInByb2Nlc3NpbmdfZXJyb3IiCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBmYWlsZWQgPSBmYWlsZWQgfHwgZmFpbHVyZUNvZGVzLkNvbnRhaW5zKGVycm9yQ29kZS5Ub1N0cmluZygpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ2hlY2sgZmFpbHVyZSBjYXRlZ29yeQogICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVDYXRlZ29yeSA9IGFjY291bnRDcmVhdGlvbi5mYWlsdXJlQ2F0ZWdvcnk7CiAgICAgICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KGZhaWx1cmVDYXRlZ29yeT8uVG9TdHJpbmcoKSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNyaXRpY2FsQ2F0ZWdvcmllcyA9IG5ld1tdIAogICAgICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgICAgICJzeXN0ZW1fZXJyb3IiLCAKICAgICAgICAgICAgICAgICAgICAgICAgInZhbGlkYXRpb25fZXJyb3IiLCAKICAgICAgICAgICAgICAgICAgICAgICAgImJ1c2luZXNzX3J1bGVfdmlvbGF0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgImNvcmVfYmFua2luZ19mYWlsdXJlIgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gZmFpbGVkIHx8IGNyaXRpY2FsQ2F0ZWdvcmllcy5Db250YWlucyhmYWlsdXJlQ2F0ZWdvcnkuVG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBmYWlsZWQ7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpCiAgICAgICAgewogICAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gb2NjdXJzLCBsb2cgaXQgYW5kIHJldHVybiB0cnVlIChmYWlsZWQpCiAgICAgICAgICAgIGlmIChjb250ZXh0Py5NZXRhRGF0YSAhPSBudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb250ZXh0Lk1ldGFEYXRhWyJhY2NvdW50X2NyZWF0aW9uX2ZhaWxlZF9ydWxlX2Vycm9yIl0gPSBuZXcKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGV4Lk1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IGV4LkdldFR5cGUoKS5OYW1lLAogICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA9IERhdGVUaW1lLlV0Y05vdwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEV4Y2VwdGlvbiBtZWFucyBmYWlsdXJlCiAgICAgICAgfQogICAgfQp9Cg=="
            },
            "timer": null,
            "view": null,
            "onExecutionTasks": []
          }
        ]
      },
      {
        "key": "account-opening-success",
        "stateType": 3,
        "versionStrategy": "Minor",
        "labels": [
          {
            "language": "en-US",
            "label": "Account Opening Successful"
          },
          {
            "language": "tr-TR",
            "label": "Hesap Açılışı Başarılı"
          }
        ],
        "view": {
          "key": "account-opening-success-view",
          "domain": "core",
          "version": "1.0.0",
          "flow": "sys-views"
        },
        "subFlow": null,
        "onEntries": [],
        "onExits": []
      },
      {
        "key": "cancelled",
        "stateType": 3,
        "versionStrategy": "Minor",
        "labels": [
          {
            "language": "en-US",
            "label": "Account Opening Cancelled"
          },
          {
            "language": "tr-TR",
            "label": "Hesap Açılışı İptal Edildi"
          }
        ],
        "view": {
          "key": "account-opening-cancelled-view",
          "domain": "core",
          "version": "1.0.0",
          "flow": "sys-views"
        },
        "subFlow": null,
        "onEntries": [],
        "onExits": []
      }
    ]
  }
}